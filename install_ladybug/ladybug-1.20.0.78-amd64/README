//=============================================================================
// Copyright (c) 2001-2022 FLIR Systems, Inc. All Rights Reserved.
//
// This software is the confidential and proprietary information of FLIR
// Integrated Imaging Solutions, Inc. ("Confidential Information"). You
// shall not disclose such Confidential Information and shall use it only in
// accordance with the terms of the license agreement you entered into
// with FLIR Integrated Imaging Solutions, Inc. (FLIR).
//
// FLIR MAKES NO REPRESENTATIONS OR WARRANTIES ABOUT THE SUITABILITY OF THE
// SOFTWARE, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
// PURPOSE, OR NON-INFRINGEMENT. FLIR SHALL NOT BE LIABLE FOR ANY DAMAGES
// SUFFERED BY LICENSEE AS A RESULT OF USING, MODIFYING OR DISTRIBUTING
// THIS SOFTWARE OR ITS DERIVATIVES.
//=============================================================================

===============================================================================
==
== README
==
===============================================================================

===============================================================================
1. DEPENDENCIES
===============================================================================

-------------------------------------------------------------------------------
1.1. UBUNTU DEPENDENCIES
-------------------------------------------------------------------------------
To install Ladybug on Linux you will need to have a few prerequisite
libraries installed.  Below is a list of libs that Ladybug depends on.

Ubuntu 20.04:
1) libxerces-c3.2
2) libraw1394-11
3) libc6
4) libusb-1.0-0 (version 1.0.17 or greater recommended)
5) xsdcxx
6) wget
7) libavcodec58
8) libavformat58
9) libavutil56
10) libswscale5
11) libglu1-mesa
12) libomp5
13) freeglut3
14) freeglut3-dev
15) libglu1-mesa-dev

Ubuntu 20.04 ARM:
1) libxerces-c3.2
2) libraw1394-11
3) libc6
4) libusb-1.0-0
5) xsdcxx
6) wget
7) freeglut3

Ubuntu 18.04:
1) libxerces-c3.2
2) libraw1394-11
3) libc6
4) libusb-1.0-0 (version 1.0.17 or greater recommended)
5) xsdcxx
6) wget
7) libavcodec57
8) libavformat57
9) libavutil55
10) libswscale4
11) libglu1-mesa
12) libomp5
13) freeglut3
14) freeglut3-dev
15) libglu1-mesa-dev

Ubuntu 18.04 ARM:
1) libxerces-c3.2
2) libraw1394-11
3) libc6
4) libusb-1.0-0
5) xsdcxx
6) wget
7) freeglut3

Note that only acquisition and recording are currently supported for Ubuntu 20.04 ARM and Ubuntu 18.04 ARM.

-------------------------------------------------------------------------------
1.2. DEPENDENCY INSTALLATION
-------------------------------------------------------------------------------
To install these dependencies, the most straightforward approach is to use your
system's built-in package management utility. In the case of Ubuntu, the utility
is named "apt". Below is a set of one-line commands that can be used to install
all the required dependencies for various releases of Ubuntu Long Term Support
(LTS).

Ubuntu 20.04:
user$:  sudo apt-get install libxerces-c3.2 libraw1394-11 libc6         \
        libusb-1.0-0 xsdcxx wget libavcodec58 libavformat58 libavutil56 \
        libswscale5 libglu1-mesa libomp5 freeglut3 freeglut3-dev        \
        libglu1-mesa-dev

Ubuntu 20.04 ARM:
user$:  sudo apt-get install libxerces-c3.2 libraw1394-11 libc6         \
        libusb-1.0-0 xsdcxx wget freeglut3

Ubuntu 18.04:
user$:  sudo apt-get install libxerces-c3.2 libraw1394-11 libc6         \
        libusb-1.0-0 xsdcxx wget libavcodec57 libavformat57 libavutil55 \
        libswscale4 libglu1-mesa libomp5 freeglut3 freeglut3-dev        \
        libglu1-mesa-dev

Ubuntu 18.04 ARM:
user$:  sudo apt-get install libxerces-c3.2 libraw1394-11 libc6         \
        libusb-1.0-0 xsdcxx wget freeglut3

After installing raw1394 you may need to add the raw1394 module to be loaded on
start.  To do this just add "raw1394" to the /etc/modules file.

===============================================================================
2. LADYBUG INSTALLATION
===============================================================================
To install the Ladybug software on Linux:

$ cd install; bash ./install_ladybug.sh


===============================================================================
3. USB RELATED NOTES
===============================================================================
On Linux systems, image size is restricted to 2MiB or less by default. To
increase this limit so that you can make use of your imaging hardware's full
capabilities, you will need to make a minor change to your system. Steps to
make the change can be found below, or at 
<https://www.flir.com/support-center/iis/machine-vision/application-note/understanding-usbfs-on-linux>


1. Open the /etc/default/grub file in any text editor. Find and replace:

GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"

with this:

GRUB_CMDLINE_LINUX_DEFAULT="quiet splash usbcore.usbfs_memory_mb=1000"


2. Update grub with these settings:

$ sudo update-grub


3. You may need to reboot.


If this method fails to set the memory limit, run the following command:

$ sudo sh -c 'echo 1000 > /sys/module/usbcore/parameters/usbfs_memory_mb'


To confirm that you have successfully updated the memory limit, run the following command:

cat /sys/module/usbcore/parameters/usbfs_memory_mb


===============================================================================
4. LADYBUG REMOVAL
===============================================================================

To uninstall & remove installation config files after uninstall:

$ cd install; bash ./remove_ladybug.sh
